---
title: ClaudeCode中心のレビュープロセス改善の取り組みを進めている
pubDate: 2025-07-27T07:05:18.681Z
updatedDate: 2025-07-27T07:05:18.682Z
fmContentType: blog
description: Claude CodeとClaude Code Actionを組み合わせたレビュープロセスの改善について、試行錯誤の記録と学び
heroImage: /ClaudeCode画像.jpeg
---

## はじめに

最近、Claude CodeとClaude Code Actionを組み合わせてコードレビューのプロセスを改善する取り組みを進めています。

いくつかの試行錯誤を重ねながら、少しずつ理想的なワークフローに近づいてきました。今回はその過程で得た学びと課題について共有します。

## なぜレビューを自動化したいのか

Claude Codeで定型的なプロセスで開発してPRを上げ、CIをパスさせる。テストコードのカバレッジも十分高い。

それでもソースコードの品質は自分が期待したレベルではない。CLAUDE.mdでこうしたいと明示しているにも関わらず、求める品質に達していないことがある。

これを都度人力で指摘して直すのは時間がかかる。Claude CodeとOpusの実力なら十分できそうなのに。

このような背景から、Claude CodeとClaude Code Actionを組み合わせたレビュープロセスの自動化に取り組み始めました。

## 現在のワークフロー

現在実装しているワークフローは以下の通りです。

1. **Claude Codeで実装を進めてPRを作成**
   - 通常通りClaude Codeを使用して機能実装
   - 完成したらGitHubにPRを作成

2. **Claude Code ActionのCIでコードレビュー**
   - PR作成時に自動的にClaude Code Actionが起動
   - コードレビューを実施し、GitHub上にコメントを投稿

3. **Claude Codeのカスタムコマンドでレビューを読んで修正**
   - カスタムコマンドを使用してレビューコメントを取得
   - 指摘事項に基づいて修正を実施
   - 修正完了後、レビューコメントにリプライ

## 試行錯誤の記録

### 試行錯誤1：Claude Code Actionの基本導入

最初はClaude Code Actionを導入し、コードレビューを自動化しました。

**結果**：
- 長文のコメントが投稿されるようになった
- `direct_prompt`に観点を記載することで、毎回同じ視点でのレビューが可能に
- 一定の便利さは感じたが、**ローカルのClaude Codeに貼り付ける作業が面倒**

### 試行錯誤2：インラインレビューの導入

長文レビューが見にくかったため、GitHub MCPを使用してインラインレビューを実装しました。

**結果**：
- レビューコメントが該当箇所に直接表示され、見やすくなった
- しかし、**貼り付け作業はより面倒になってしまった**

### 試行錯誤3：カスタムコマンドの作成

Claude Codeのカスタムコマンドで、インラインレビューを自動的に探して読み、修正するコマンドを作成しました。

**結果**：
- 貼り付け作業の手間は解消
- **どのレビューに対応したか追いづらくなる**という新たな問題が発生

### 試行錯誤4：リプライ機能の追加

カスタムコマンドにレビューへのリプライ機能を追加し、対応状況を可視化しました。

**結果**：
- STEP数が増えたことで**動作が不安定に**
- リプライをしなかったり、APIの使用を間違えたりする事象が発生

### 試行錯誤5：カスタムサブエージェントの導入

コンテキストの増大が原因と考え、最近登場したカスタムサブエージェントの作成に着手しました。

**結果**：
- カスタムコマンドには手順とAgent間の関係だけを記載
- 手順を守るようになった一方で、**エージェント間でのコンテキスト共有不足**が発生
- 例：対応中のブランチを間違えて別のPRにコメントする

## 試行錯誤を通して学んだこと

### 1. レビューと改善のサイクルが高速化

AIによるコードレビューで、コードの品質改善サイクルが劇的に高速化しました。5分程度でレビューが返ってくる体験は非常に快適です。

### 2. 企業での活用可能性

AIによるコードレビューを整えることで、人間のレビューを最終STEPに置くことができ、企業においても価値のある取り組みになる可能性を感じています。

### 3. CLAUDE.mdの重要性

Claude Code Actionのレビュー品質向上には、CLAUDE.mdの改善が必須です。レビュー観点の言語化が求められます。

### 4. コンテキスト圧縮テクニックの有効性

最近話題の「人名＋テクニック」を使ったコンテキスト圧縮が有効です。例えば、TypeScriptの型定義レビューに「Matt Pocock」を言及するなど。

### 5. カスタムサブエージェントの可能性と課題

カスタムサブエージェントは複雑な手順を守らせるのに有効ですが、現状では扱いが難しい状況です。以下の課題があります。

- エージェント間のコンテキスト受け渡しの問題
- エージェントが使われるタイミングの指定が困難
- エージェントの管理の複雑さ

### 6. プロジェクト固有の管理の必要性

カスタムサブエージェントの導入により、今までグローバルに置いていたCLAUDE.mdやカスタムコマンドの見直しが必要になりました。プロジェクトごとにエージェントやコマンドをgit管理し、継続的に改善する必要を感じています。

### 7. 新しいスキルセットの必要性

プロンプトエンジニアリング/コンテキストエンジニアリングという新しい分野を真面目に学ぶことが、ミドル〜シニアレベルのエンジニアに求められます。生産性に直結する重要なスキルです。

## 最後に

今後も個人的にカスタムサブエージェントを使って改善を続けていきます。またブログでその進捗を共有予定です。

AIを扱うことに関する知識をつけるため、書籍「LLMのプロンプトエンジニアリング」を読み始めました。今回の改善にも一役買ってくれている良書です。

Claude CodeとClaude Code Actionを組み合わせたレビュープロセスは、まだ発展途上ですが、個人開発の生産性と品質を大きく向上させる可能性を秘めていると感じています。
